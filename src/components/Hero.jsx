import React,{useEffect,useRef,useState}from'react';import{motion}from'framer-motion';import{slides,altFromUrl}from'@/data/heroSlides';export default function Hero(){const[index,setIndex]=useState(0);const[paused,setPaused]=useState(false);const[announce,setAnnounce]=useState('');const liveRef=useRef(null);const touch=useRef({x:0,y:0,active:false});const hasSlides=slides.length>0;useEffect(()=>{if(!hasSlides||paused)return;const id=setInterval(()=>setIndex(i=>(i+1)%slides.length),5000);return()=>clearInterval(id)},[paused,hasSlides]);useEffect(()=>{setAnnounce(`Slide ${index+1} of ${slides.length}`)},[index]);useEffect(()=>{if(!hasSlides)return;const next=new Image();next.src=slides[(index+1)%slides.length]},[index,hasSlides]);const prev=()=>setIndex(i=>(i-1+slides.length)%slides.length);const next=()=>setIndex(i=>(i+1)%slides.length);const onTouchStart=e=>{const t=e.touches[0];touch.current={x:t.clientX,y:t.clientY,active:true}};const onTouchEnd=e=>{if(!touch.current.active)return;const t=e.changedTouches[0];const dx=t.clientX-touch.current.x;const dy=t.clientY-touch.current.y;if(Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>30)(dx>0?prev():next());touch.current.active=false};return(<section id='hero' className='relative h-[92vh] pt-16 overflow-hidden select-none' onMouseEnter={()=>setPaused(true)} onMouseLeave={()=>setPaused(false)} onTouchStart={onTouchStart} onTouchEnd={onTouchEnd} aria-label='Hero slideshow'><div className='absolute inset-0'>{hasSlides?slides.map((src,i)=>(<img key={src+i} src={src} alt={altFromUrl(src)} className={`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ${i===index?'opacity-100':'opacity-0'}`} />)):(<div className='absolute inset-0 bg-gradient-to-br from-onyx via-carbon to-onyx'/>)}<div className='absolute inset-0 bg-gradient-to-b from-black/70 via-black/20 to-black/80'/></div><div className='relative z-10 h-full flex flex-col items-center justify-center text-center px-6'><motion.h1 initial={{y:20,opacity:0}} animate={{y:0,opacity:1}} transition={{duration:.6,delay:.1}} className='text-white text-5xl md:text-7xl font-extrabold tracking-wide font-display'>Euphoria</motion.h1><motion.p initial={{y:20,opacity:0}} animate={{y:0,opacity:1}} transition={{duration:.6,delay:.2}} className='text-magenta text-xl mt-4'>Art, Music &amp; Indulgence in Johannesburg</motion.p><motion.div initial={{y:20,opacity:0}} animate={{y:0,opacity:1}} transition={{duration:.6,delay:.3}} className='mt-6 flex flex-wrap gap-4 justify-center'><a href='#events' className='px-6 py-3 rounded-full bg-gradient-to-r from-violet to-magenta text-black font-semibold shadow-glow hover:opacity-90 transition'>Get Tickets</a><a href={import.meta.env.VITE_WHATSAPP_VIP_URL||'#vip'} className='px-6 py-3 rounded-full bg-white/10 border border-white/20 text-white hover:bg-white/20 transition'>Join VIP WhatsApp</a></motion.div><div ref={liveRef} aria-live='polite' className='sr-only'>{announce}</div></div>{hasSlides&&(<><button onClick={prev} aria-label='Previous slide' className='absolute left-2 md:left-6 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/40 hover:bg-black/60 text-white'>‹</button><button onClick={next} aria-label='Next slide' className='absolute right-2 md:right-6 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/40 hover:bg-black/60 text-white'>›</button><div className='absolute bottom-5 left-0 right-0 flex justify-center gap-2'>{slides.map((_,i)=>(<button key={i} aria-label={`Go to slide ${i+1}`} onClick={()=>setIndex(i)} className={`w-2.5 h-2.5 rounded-full transition ${i===index?'bg-white':'bg-white/40 hover:bg-white/70'}`} />))}</div></> )}</section>)}